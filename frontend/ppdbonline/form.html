<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PPDB Online Al-Ittihadiyyah</title>
  <link rel="icon" type="image/png" href="/favicon.png">

  <!-- Tailwind CSS -->
  <link href="/css/output.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body { font-family: 'Poppins', sans-serif; }

    /* Efek "Zoom Out" di Mobile */
    @media (max-width: 767px) {
      html {
        font-size: 81.25%; /* Setara 13px jika base 16px. Memberi efek ~80% zoom out */
      }
    }
    @keyframes fade-in {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .animate-\[fade-in_0\.5s\] {
      animation: fade-in 0.5s ease-in-out;
    }
  </style>
</head>
<body class="bg-slate-50 text-slate-800">

<!-- NAVBAR -->
<header class="bg-secondary shadow-sm sticky top-0 z-50" data-aos="fade-down">
  <div class="max-w-screen-xl mx-auto px-4 md:px-8 lg:px-12 py-3 flex items-center justify-between">
    <a href="/" class="flex items-center gap-3 text-white">
      <img src="/favicon.png" alt="Logo" class="w-10 h-10 bg-white rounded-xl p-1 shadow-sm border border-slate-100 object-contain">
      <p class="font-bold leading-none dynamic-school-name">Al-Ittihadiyyah</p>
    </a>
    
    <!-- Desktop Nav -->
    <nav class="hidden md:flex items-center gap-2">
        <a href="index.html" class="text-sm font-medium text-white/70 hover:text-white flex items-center px-4 py-2 rounded-lg hover:bg-white/10 transition">
            <i class="fa-solid fa-arrow-left mr-2"></i> Kembali ke Halaman PPDB
        </a>
    </nav>

    <!-- Mobile Menu Button -->
    <button id="mobile-menu-btn" class="md:hidden text-white text-2xl focus:outline-none p-2">
      <i class="fa-solid fa-bars"></i>
    </button>
  </div>

  <!-- Mobile Menu Dropdown -->
  <div id="mobile-menu" class="hidden md:hidden absolute top-full left-0 w-full bg-secondary border-t border-white/10 shadow-xl flex-col p-4 gap-2 transition-all">
    <a href="index.html" class="flex items-center gap-3 px-4 py-3 font-medium text-white/70 hover:text-white hover:bg-white/10 rounded-xl transition">
        <i class="fa-solid fa-arrow-left"></i> Kembali ke Halaman PPDB
    </a>
  </div>
</header>

<main class="max-w-screen-xl mx-auto px-4 md:px-8 lg:px-12 py-6 md:py-12">
  
  <!-- FORM AREA -->
  <div class="max-w-4xl mx-auto">
    <!-- VIEW: REGISTER -->
    <div id="view-register" class="bg-white p-5 md:p-8 rounded-3xl shadow-lg border border-slate-100 transition-all duration-300" data-aos="fade-up">
      <div class="text-center mb-8">
        <h1 class="text-2xl font-bold text-slate-800">Formulir Pendaftaran Siswa Baru</h1>
        <p class="text-slate-500">Tahun Ajaran <span class="dynamic-academic-year">2025/2026</span></p>
      </div>

      <!-- Info Gelombang Pendaftaran -->
      <div id="info-wave-banner" class="bg-blue-50 border border-blue-100 rounded-2xl p-4 mb-8 flex items-start gap-4">
        <div id="info-wave-icon" class="bg-blue-100 text-blue-600 w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0">
          <i class="fa-solid fa-info-circle text-xl"></i>
        </div>
        <div>
          <h3 id="info-wave-title" class="font-bold text-blue-800">Memuat Informasi Pendaftaran...</h3>
          <p id="info-wave-desc" class="text-sm text-blue-600 mt-1">
            Periode Pendaftaran: <span id="info-wave-period" class="font-medium">...</span>
          </p>
        </div>
      </div>

      <!-- STEP INDICATOR -->
      <div class="flex items-start w-full p-3 mb-8 md:mb-12">
        <div class="step-indicator flex flex-col items-center flex-1" data-step="1">
          <div class="indicator-circle w-10 h-10 flex items-center justify-center rounded-full bg-primary text-white font-semibold">1</div>
          <p class="indicator-text mt-2 text-sm font-medium text-primary text-center">Data Calon Peserta Didik Baru</p>
        </div>
        <div class="indicator-connector flex-1 h-1 bg-slate-200 mx-2 mt-5"></div>
        <div class="step-indicator flex flex-col items-center flex-1" data-step="2">
          <div class="indicator-circle w-10 h-10 flex items-center justify-center rounded-full bg-slate-200 text-slate-500 font-semibold">2</div>
          <p class="indicator-text mt-2 text-sm text-slate-400 text-center">Data Orang Tua / Wali</p>
        </div>
        <div class="indicator-connector flex-1 h-1 bg-slate-200 mx-2 mt-5"></div>
        <div class="step-indicator flex flex-col items-center flex-1" data-step="3">
          <div class="indicator-circle w-10 h-10 flex items-center justify-center rounded-full bg-slate-200 text-slate-500 font-semibold">3</div>
          <p class="indicator-text mt-2 text-sm text-slate-400 text-center">Konfirmasi</p>
        </div>
      </div>

      <form id="registration-form">
        <!-- STEP 1: DATA CALON PESERTA DIDIK -->
        <div id="step-1" data-step="1" class="step-content animate-[fade-in_0.5s]">
          <div class="space-y-8">
            <!-- Jenjang Pendidikan -->
            <div class="p-6 border border-slate-200 rounded-2xl bg-slate-50/50">
              <h3 class="font-bold text-lg text-slate-800 mb-4">1. Jenjang Pendidikan</h3>
              <div class="grid grid-cols-2 gap-4">
                <label class="relative flex items-center p-3 md:p-4 border rounded-2xl cursor-pointer hover:bg-slate-50 bg-white">
                  <input type="radio" name="jenjang" value="TK" required class="w-4 h-4 text-primary accent-primary">
                  <span class="ml-3 font-medium text-sm md:text-base">TK (Taman Kanak-kanak)</span>
                </label>
                <label class="relative flex items-center p-3 md:p-4 border rounded-2xl cursor-pointer hover:bg-slate-50 bg-white">
                  <input type="radio" name="jenjang" value="MI" class="w-4 h-4 text-primary accent-primary">
                  <span class="ml-3 font-medium text-sm md:text-base">MI (Madrasah Ibtidaiyah)</span>
                </label>
              </div>
            </div>

            <!-- Data Diri -->
            <div class="p-6 border border-slate-200 rounded-2xl bg-slate-50/50">
              <h3 class="font-bold text-lg text-slate-800 mb-4">2. Data Diri Calon Siswa</h3>
              <div class="space-y-6">
                <div class="grid md:grid-cols-2 gap-6">
                  <div class="space-y-2">
                    <label for="reg-name" class="text-sm font-semibold text-slate-700">Nama Lengkap</label>
                    <input type="text" id="reg-name" class="w-full p-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-primary focus:outline-none" placeholder="Sesuai Akta Kelahiran" required>
                  </div>
                  <div class="space-y-2">
                    <label for="reg-nickname" class="text-sm font-semibold text-slate-700">Nama Panggilan</label>
                    <input type="text" id="reg-nickname" class="w-full p-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-primary focus:outline-none" placeholder="Nama panggilan" required>
                  </div>
                </div>
                <div>
                  <p class="block text-sm font-semibold text-slate-700 mb-2">Jenis Kelamin</p>
                  <div class="grid grid-cols-2 gap-4">
                    <label class="relative flex items-center p-3 md:p-4 border rounded-2xl cursor-pointer hover:bg-slate-50 bg-white">
                      <input type="radio" name="jk" value="L" required class="w-4 h-4 text-primary accent-primary">
                      <span class="ml-3 font-medium text-sm md:text-base">Laki-laki</span>
                    </label>
                    <label class="relative flex items-center p-3 md:p-4 border rounded-2xl cursor-pointer hover:bg-slate-50 bg-white">
                      <input type="radio" name="jk" value="P" class="w-4 h-4 text-primary accent-primary">
                      <span class="ml-3 font-medium text-sm md:text-base">Perempuan</span>
                    </label>
                  </div>
                </div>
                <div class="grid md:grid-cols-2 gap-6">
                  <div class="space-y-2">
                    <label for="reg-birthplace" class="text-sm font-semibold text-slate-700">Tempat Lahir</label>
                    <input type="text" id="reg-birthplace" class="w-full p-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-primary focus:outline-none" required>
                  </div>
                  <div class="space-y-2">
                    <label for="reg-birthdate" class="text-sm font-semibold text-slate-700">Tanggal Lahir</label>
                    <input type="date" id="reg-birthdate" class="w-full p-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-primary focus:outline-none" required>
                  </div>
                </div>
              </div>
            </div>

            <!-- Asal Sekolah -->
            <div id="field-asal-sekolah" class="p-6 border border-slate-200 rounded-2xl bg-slate-50/50">
              <h3 class="font-bold text-lg text-slate-800 mb-4">3. Riwayat Pendidikan</h3>
              <div class="space-y-2">
                <label for="reg-school" class="text-sm font-semibold text-slate-700">Asal Sekolah</label>
                <input type="text" id="reg-school" class="w-full p-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-primary focus:outline-none" placeholder="Nama sekolah sebelumnya (TK/RA)">
              </div>
            </div>
          </div>
          <div class="mt-8 flex justify-end">
            <button type="button" id="btn-next-1" class="btn-next bg-primary text-white font-bold py-3 px-8 rounded-xl hover:bg-secondary transition shadow-lg shadow-primary/30">
              Selanjutnya <i class="fa-solid fa-arrow-right ml-2"></i>
            </button>
          </div>
        </div>

        <!-- STEP 2: DATA ORANG TUA/WALI -->
        <div id="step-2" data-step="2" class="step-content hidden animate-[fade-in_0.5s]">
          <div class="space-y-8">
            <!-- Data Wali -->
            <div class="p-6 border border-slate-200 rounded-2xl bg-slate-50/50">
              <h3 class="font-bold text-lg text-slate-800 mb-4">1. Data Orang Tua / Wali</h3>
              <div class="space-y-6">
                <div class="space-y-2">
                  <label for="reg-parent" class="text-sm font-semibold text-slate-700">Nama Lengkap Orang Tua / Wali</label>
                  <input type="text" id="reg-parent" class="w-full p-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-primary focus:outline-none" required>
                </div>
                <div class="grid md:grid-cols-2 gap-6">
                  <div class="space-y-2">
                    <label for="reg-phone" class="text-sm font-semibold text-slate-700">No. WhatsApp (Aktif)</label>
                    <input type="tel" id="reg-phone" class="w-full p-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-primary focus:outline-none" placeholder="Contoh: 081234567890" required>
                  </div>
                  <div class="space-y-2">
                    <label for="reg-email" class="text-sm font-semibold text-slate-700">Alamat Email</label>
                    <input type="email" id="reg-email" class="w-full p-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-primary focus:outline-none" placeholder="Contoh: nama@email.com" required>
                  </div>
                </div>
              </div>
            </div>

            <!-- Alamat -->
            <div class="p-6 border border-slate-200 rounded-2xl bg-slate-50/50">
              <h3 class="font-bold text-lg text-slate-800 mb-4">2. Alamat Tempat Tinggal</h3>
              <div class="space-y-6">
                <div class="space-y-2">
                  <label for="reg-address" class="text-sm font-semibold text-slate-700">Alamat Lengkap</label>
                  <textarea id="reg-address" class="w-full p-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-primary focus:outline-none" rows="2" placeholder="Nama Jalan, Nomor Rumah, RT/RW" required></textarea>
                </div>
                <div class="grid md:grid-cols-3 gap-6">
                  <div class="space-y-2">
                    <label for="reg-village" class="text-sm font-semibold text-slate-700">Kelurahan/Desa</label>
                    <input type="text" id="reg-village" class="w-full p-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-primary focus:outline-none" required>
                  </div>
                  <div class="space-y-2">
                    <label for="reg-district" class="text-sm font-semibold text-slate-700">Kecamatan</label>
                    <input type="text" id="reg-district" class="w-full p-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-primary focus:outline-none" required>
                  </div>
                  <div class="space-y-2">
                    <label for="reg-city" class="text-sm font-semibold text-slate-700">Kota/Kabupaten</label>
                    <input type="text" id="reg-city" class="w-full p-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-primary focus:outline-none" required>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="mt-8 flex justify-between items-center">
            <button type="button" id="btn-prev-2" class="btn-prev bg-slate-200 text-slate-700 font-bold py-3 px-8 rounded-xl hover:bg-slate-300 transition">
              <i class="fa-solid fa-arrow-left mr-2"></i> Kembali
            </button>
            <button type="button" id="btn-next-2" class="btn-next bg-primary text-white font-bold py-3 px-8 rounded-xl hover:bg-secondary transition shadow-lg shadow-primary/30">
              Selanjutnya <i class="fa-solid fa-arrow-right ml-2"></i>
            </button>
          </div>
        </div>

        <!-- STEP 3: KONFIRMASI DATA -->
        <div id="step-3" data-step="3" class="step-content hidden animate-[fade-in_0.5s]">
          <div class="space-y-8">
            <!-- Ringkasan Data Siswa -->
            <div class="bg-slate-50 p-6 rounded-2xl border border-slate-200">
              <h3 class="text-lg font-bold text-slate-800 border-b border-slate-200 pb-3 mb-3">Ringkasan Data Siswa</h3>
              <div class="space-y-1 text-sm">
                <div class="flex justify-between items-center py-2"><p class="text-slate-500">Jenjang Pendidikan</p><p id="summary-jenjang" class="font-semibold text-slate-700 text-right">-</p></div>
                <div class="flex justify-between items-center py-2 border-t border-slate-100"><p class="text-slate-500">Nama Lengkap</p><p id="summary-name" class="font-semibold text-slate-700 text-right">-</p></div>
                <div class="flex justify-between items-center py-2 border-t border-slate-100"><p class="text-slate-500">Nama Panggilan</p><p id="summary-nickname" class="font-semibold text-slate-700 text-right">-</p></div>
                <div class="flex justify-between items-center py-2 border-t border-slate-100"><p class="text-slate-500">Jenis Kelamin</p><p id="summary-jk" class="font-semibold text-slate-700 text-right">-</p></div>
                <div class="flex justify-between items-center py-2 border-t border-slate-100"><p class="text-slate-500">Tempat, Tanggal Lahir</p><p id="summary-ttl" class="font-semibold text-slate-700 text-right">-</p></div>
                <div class="flex justify-between items-center py-2 border-t border-slate-100"><p class="text-slate-500">Asal Sekolah</p><p id="summary-school" class="font-semibold text-slate-700 text-right">-</p></div>
              </div>
            </div>
            <!-- Ringkasan Data Wali -->
            <div class="bg-slate-50 p-6 rounded-2xl border border-slate-200">
              <h3 class="text-lg font-bold text-slate-800 border-b border-slate-200 pb-3 mb-3">Ringkasan Data Wali</h3>
              <div class="space-y-1 text-sm">
                <div class="flex justify-between items-center py-2"><p class="text-slate-500">Nama Orang Tua / Wali</p><p id="summary-parent" class="font-semibold text-slate-700 text-right">-</p></div>
                <div class="flex justify-between items-center py-2 border-t border-slate-100"><p class="text-slate-500">No. WhatsApp</p><p id="summary-phone" class="font-semibold text-slate-700 text-right">-</p></div>
                <div class="flex justify-between items-center py-2 border-t border-slate-100"><p class="text-slate-500">Email</p><p id="summary-email" class="font-semibold text-slate-700 text-right">-</p></div>
                <div class="flex justify-between items-start py-2 border-t border-slate-100">
                  <p class="text-slate-500 flex-shrink-0 mr-4">Alamat Lengkap</p>
                  <p id="summary-address" class="font-semibold text-slate-700 text-right">-</p>
                </div>
              </div>
            </div>
          </div>

          <div class="mt-6">
            <label class="flex items-center">
              <input type="checkbox" id="confirm-checkbox" class="h-4 w-4 text-primary rounded border-slate-300 focus:ring-primary">
              <span class="ml-2 text-sm text-slate-600">Saya menyatakan bahwa data yang saya isikan adalah benar dan dapat dipertanggungjawabkan.</span>
            </label>
          </div>

          <div class="mt-8 flex justify-between items-center">
            <button type="button" id="btn-prev-3" class="btn-prev bg-slate-200 text-slate-700 font-bold py-3 px-8 rounded-xl hover:bg-slate-300 transition">
              <i class="fa-solid fa-arrow-left mr-2"></i> Kembali
            </button>
            <button type="button" id="btn-daftar" class="bg-primary text-white font-bold py-3 px-8 rounded-xl hover:bg-secondary transition shadow-lg shadow-primary/30 disabled:bg-slate-300 disabled:shadow-none disabled:cursor-not-allowed" disabled>
              Kirim Pendaftaran
            </button>
          </div>
        </div>
      </form>
    </div>

    <!-- VIEW: CHECK STATUS -->
    <div id="view-check" class="hidden bg-white p-5 md:p-8 rounded-3xl shadow-lg border border-slate-100 transition-all duration-300" data-aos="fade-up">
      <div class="text-center mb-8">
        <h1 class="text-2xl font-bold text-slate-800 mb-2">Cek Status Pendaftaran</h1>
        <p class="text-slate-500">Masukkan ID Pendaftaran Anda untuk melihat status terkini.</p>
      </div>

      <form id="check-status-form" class="space-y-4 max-w-md mx-auto">
        <div>
          <label for="check-id" class="block text-sm font-semibold text-slate-700 mb-2">ID Pendaftaran</label>
          <div class="relative">
            <i class="fa-solid fa-id-card absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"></i>
            <input type="text" id="check-id" class="w-full pl-11 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-primary focus:outline-none uppercase" placeholder="Contoh: REG-001" required>
          </div>
        </div>
        <button type="submit" class="w-full bg-primary text-white font-bold py-3 rounded-xl hover:bg-secondary transition shadow-lg shadow-primary/30">
          <i class="fa-solid fa-magnifying-glass mr-2"></i> Cek Status
        </button>
      </form>

      <!-- RESULT CARD -->
      <div id="result-card" class="hidden w-full max-w-md mx-auto mt-8 animate-[fade-in_0.3s]">
        <div class="bg-white rounded-3xl shadow-xl border border-slate-100 overflow-hidden">
          <div id="result-header" class="bg-slate-100 p-6 text-center border-b border-slate-200">
            <div id="result-icon" class="w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto text-3xl shadow-sm mb-3">
              <i class="fa-solid fa-question"></i>
            </div>
            <h3 id="result-status" class="text-xl font-bold text-slate-800">Status</h3>
            <p id="result-message" class="text-sm text-slate-500 mt-1">Pesan status...</p>
          </div>
          <div class="p-6 space-y-4">
            <div class="flex justify-between border-b border-slate-50 pb-3">
              <span class="text-slate-500 text-sm">Nama Siswa</span>
              <span id="result-name" class="font-bold text-slate-800 text-right">Nama</span>
            </div>
            <div class="flex justify-between border-b border-slate-50 pb-3">
              <span class="text-slate-500 text-sm">Jenjang</span>
              <span id="result-level" class="font-medium text-slate-800">Jenjang</span>
            </div>
            <div class="flex justify-between border-b border-slate-50 pb-3">
              <span class="text-slate-500 text-sm">ID Pendaftaran</span>
              <span id="result-reg-id" class="font-bold text-slate-800 font-mono">ID</span>
            </div>
            <div class="flex justify-between">
              <span class="text-slate-500 text-sm">Gel. Pendaftaran</span>
              <span id="result-wave" class="font-medium text-slate-800">Gelombang</span>
            </div>
            <div id="result-action" class="pt-4 hidden">
              <!-- Tombol Aksi Dinamis, contoh: Lanjutkan Pembayaran -->
              <button onclick="goToPaymentPageWithHash()" class="w-full bg-accent text-secondary font-bold py-3 rounded-xl hover:brightness-110 transition shadow-lg">Lanjutkan Pembayaran</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- VIEW: PAYMENT -->
    <div id="view-payment" class="hidden bg-white p-5 md:p-8 rounded-3xl shadow-lg border border-slate-100 transition-all duration-300" data-aos="fade-up">
      <!-- Kontainer ini akan menampilkan konten berdasarkan status dari backend -->
      <div id="payment-content-container" class="max-w-lg mx-auto">

        <!-- STATE: Menunggu Pembayaran -->
        <div id="payment-step-upload" class="hidden space-y-6">
          <div class="text-center">
            <h1 class="text-2xl font-bold text-slate-800">Selesaikan Pembayaran</h1>
            <p class="text-slate-500 mt-1">ID Pendaftaran: <span id="payment-reg-id-display" class="font-mono font-bold text-primary">...</span></p>
          </div>
          <div class="text-center space-y-4">
            <p class="text-slate-600">Silakan transfer biaya pendaftaran sebesar:</p>
            <h2 id="payment-fee-display" class="text-3xl font-bold text-slate-800">Rp 0</h2>
            <div class="bg-slate-50 border border-slate-200 rounded-xl p-4 flex items-center gap-4 text-left">
              <div class="w-12 h-12 bg-blue-600 text-white rounded-lg flex items-center justify-center font-bold text-sm">BSI</div>
              <div>
                <p class="text-xs text-slate-500">Bank Syariah Indonesia</p>
                <p class="font-bold text-lg text-slate-800 tracking-wide">7123456789</p>
                <p class="text-xs text-slate-500">a.n Yayasan Al-Ittihadiyyah</p>
              </div>
              <button type="button" onclick="copyAccountNumber(this)" title="Salin Nomor Rekening" class="ml-auto text-slate-500 hover:text-primary p-2 transition">
                <i class="fa-regular fa-copy text-lg"></i>
              </button>
            </div>
          </div>
          <div class="space-y-3">
            <label for="payment-proof" class="block text-sm font-semibold text-slate-700">Upload Bukti Transfer</label>
            <div class="border-2 border-dashed border-slate-300 rounded-xl p-6 text-center hover:bg-slate-50 transition cursor-pointer relative">
              <input type="file" id="payment-proof" accept="image/*" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer">
              <div id="upload-placeholder">
                <i class="fa-solid fa-cloud-arrow-up text-3xl text-slate-400 mb-2"></i>
                <p class="text-sm text-slate-500">Klik untuk upload foto bukti</p>
              </div>
              <img id="payment-preview-img" class="hidden max-h-48 mx-auto rounded-lg shadow-sm">
            </div>
          </div>
          <button id="btn-confirm-payment" class="w-full bg-primary text-white font-bold py-3 rounded-xl hover:bg-secondary transition shadow-lg shadow-primary/30">
            Konfirmasi Pembayaran
          </button>
        </div>

        <!-- STATE: Menunggu Verifikasi / Terverifikasi -->
        <div id="payment-step-waiting" class="hidden w-full max-w-md mx-auto animate-[fade-in_0.3s]">
          <div class="bg-white rounded-3xl shadow-xl border border-slate-100 overflow-hidden">
            <div id="payment-result-header" class="bg-slate-100 p-6 text-center border-b border-slate-200">
              <div id="payment-result-icon" class="w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto text-3xl shadow-sm mb-3">
                <i class="fa-solid fa-question"></i>
              </div>
              <h3 id="payment-result-status" class="text-xl font-bold text-slate-800">Status</h3>
              <p id="payment-result-message" class="text-sm text-slate-500 mt-1">Pesan status...</p>
            </div>
            <div class="p-6 space-y-4">
              <div class="flex justify-between border-b border-slate-50 pb-3">
                <span class="text-slate-500 text-sm">Nama Siswa</span>
                <span id="payment-result-name" class="font-bold text-slate-800 text-right">Nama</span>
              </div>
              <div class="flex justify-between border-b border-slate-50 pb-3">
                <span class="text-slate-500 text-sm">Jenjang</span>
                <span id="payment-result-level" class="font-medium text-slate-800">Jenjang</span>
              </div>
              <div class="flex justify-between border-b border-slate-50 pb-3">
                <span class="text-slate-500 text-sm">ID Pendaftaran</span>
                <span id="payment-result-reg-id" class="font-bold text-slate-800 font-mono">ID</span>
              </div>
              <div class="flex justify-between">
                <span class="text-slate-500 text-sm">Gel. Pendaftaran</span>
                <span id="payment-result-wave" class="font-medium text-slate-800">Gelombang</span>
              </div>
              <div id="payment-result-action" class="pt-4">
                <!-- Tombol Aksi Dinamis -->
                <button id="btn-go-to-check-status" class="w-full bg-primary text-white font-bold py-3 rounded-xl hover:bg-secondary transition shadow-lg shadow-primary/30">
                  Cek Status Pendaftaran
                </button>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</main>

<!-- MODAL ALERT (VALIDASI) -->
<div id="modal-alert-ppdb" class="fixed inset-0 bg-black/50 z-50 hidden items-center justify-center p-4 backdrop-blur-sm">
  <div class="bg-white rounded-2xl w-full max-w-sm p-6 space-y-4 shadow-2xl animate-[fade-in_0.3s] text-center">
    <div class="w-16 h-16 bg-yellow-100 text-yellow-600 rounded-full flex items-center justify-center mx-auto text-2xl mb-2">
      <i class="fa-solid fa-exclamation"></i>
    </div>
    <div>
      <h3 class="text-xl font-bold text-slate-700">Data Belum Lengkap</h3>
      <p id="alert-message-ppdb" class="text-slate-500 text-sm mt-2">Mohon lengkapi data wajib.</p>
    </div>
    <div class="flex justify-center pt-4">
      <button id="btnCloseAlert" onclick="document.getElementById('modal-alert-ppdb').classList.add('hidden')" class="px-6 py-2.5 bg-slate-100 text-slate-600 rounded-xl hover:bg-slate-200 transition font-medium w-full">Mengerti</button>
    </div>
  </div>
</div>

<!-- MODAL SUKSES PENDAFTARAN -->
<div id="modal-success-ppdb" class="fixed inset-0 bg-black/50 z-50 hidden items-center justify-center p-4 backdrop-blur-sm">
  <div class="bg-white rounded-2xl w-full max-w-md p-6 space-y-4 shadow-2xl animate-[fade-in_0.3s] text-center">
    <div class="w-20 h-20 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto text-3xl mb-2">
      <i class="fa-solid fa-check"></i>
    </div>
    <div>
      <h3 class="text-2xl font-bold text-slate-800">Pendaftaran Berhasil!</h3>
      <p class="text-slate-600 mt-2">Data Anda telah terkirim. Silakan simpan ID Pendaftaran Anda dan lanjutkan ke tahap pembayaran.</p>
    </div>
    <div class="bg-slate-100 border border-slate-200 rounded-xl p-4 flex items-center justify-between gap-4">
      <div>
        <p class="text-sm text-slate-500 text-left">ID Pendaftaran Anda:</p>
        <p id="success-reg-id" class="text-2xl font-bold font-mono text-primary tracking-widest text-left">REG-XXXX</p>
      </div>
      <button onclick="copyRegistrationId(this)" title="Salin ID" class="flex-shrink-0 w-12 h-12 bg-slate-200 text-slate-600 rounded-xl flex items-center justify-center hover:bg-primary hover:text-white transition">
        <i class="fa-regular fa-copy text-xl"></i>
      </button>
    </div>
    <div class="pt-4">
      <button id="btn-go-to-payment" class="w-full bg-primary text-white font-bold py-3 rounded-xl hover:bg-secondary transition shadow-lg shadow-primary/30">
        Lanjutkan Pembayaran
      </button>
    </div>
  </div>
</div>

<!-- MODAL SUKSES PEMBAYARAN -->
<div id="modal-success-payment" class="fixed inset-0 bg-black/50 z-50 hidden items-center justify-center p-4 backdrop-blur-sm">
  <div class="bg-white rounded-2xl w-full max-w-sm p-6 space-y-4 shadow-2xl text-center animate-[fade-in_0.3s]">
    <div class="w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto text-2xl mb-2">
      <i class="fa-solid fa-check"></i>
    </div>
    <div>
      <h3 class="text-xl font-bold text-slate-800">Terima Kasih!</h3>
      <p class="text-slate-600 text-sm mt-2">Bukti pembayaran telah dikirim. Admin akan segera memverifikasi data Anda.</p>
    </div>
    <div class="pt-2">
      <button onclick="refreshPaymentPage()" class="block w-full bg-primary text-white font-bold py-2.5 rounded-xl hover:bg-secondary transition">Oke, Saya Mengerti</button>
    </div>
  </div>
</div>

<!-- FOOTER -->
<footer class="bg-secondary text-white pt-16 pb-8 mt-12">
  <div class="max-w-screen-xl mx-auto px-4 md:px-8 lg:px-12">
    <div class="grid md:grid-cols-3 gap-12 mb-12">
      <!-- Identitas & Sosmed -->
      <div class="text-center">
        <div class="flex items-center justify-center gap-3 mb-6">
           <img src="/favicon.png" alt="Logo" class="w-10 h-10 bg-white rounded-xl p-1 shadow-sm object-contain">
           <span class="font-bold text-xl dynamic-school-name">Al-Ittihadiyyah</span>
        </div>
        <p class="text-white/80 text-sm leading-relaxed mb-6">
          Membangun generasi Rabbani yang unggul dalam prestasi, berakhlak mulia, dan siap menghadapi tantangan global.
        </p>
      </div>

      <!-- Social Media -->
      <div class="text-center md:-ml-8">
        <h4 class="font-bold text-lg mb-6 text-white">Social Media</h4>
        <div class="flex justify-center gap-4">
          <a href="https://www.instagram.com/" target="_blank" class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-accent hover:text-secondary transition"><i class="fa-brands fa-instagram"></i></a>
          <a href="https://www.facebook.com/" target="_blank" class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-accent hover:text-secondary transition"><i class="fa-brands fa-facebook-f"></i></a>
          <a href="https://www.youtube.com/" target="_blank" class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-accent hover:text-secondary transition"><i class="fa-brands fa-youtube"></i></a>
        </div>
      </div>

      <!-- Kontak -->
      <div class="text-center md:text-left md:justify-self-end">
        <h4 class="font-bold text-lg mb-6 text-white md:text-center">Hubungi Kami</h4>
        <ul class="space-y-4 text-sm text-white/80">
          <li class="flex gap-3 items-start justify-center md:justify-start">
            <i class="fa-solid fa-location-dot mt-1 text-white"></i>
            <span>Jl. Masjid An Nur No.6, RT.3/RW.2, Menteng Dalam, Kec. Tebet, Kota Jakarta Selatan, 12870</span>
          </li>
          <li class="flex gap-3 items-center justify-center md:justify-start">
            <i class="fa-solid fa-phone text-white"></i>
            <span>(021) No. Telp</span>
          </li>
          <li class="flex gap-3 items-center justify-center md:justify-start">
            <i class="fa-solid fa-phone text-white"></i>
            <span>No. Telp (WA Admin)</span>
          </li>
          <li class="flex gap-3 items-center justify-center md:justify-start">
            <i class="fa-solid fa-envelope text-white"></i>
            <span>Email Sekolah</span>
          </li>
        </ul>
      </div>
    </div>

    <div class="border-t border-white/10 pt-8 text-center text-sm text-white/60">
      <p>&copy; 2026 Yayasan Pendidikan Islam <span class="dynamic-school-name">Al-Ittihadiyyah</span>. All rights reserved.</p>
    </div>
  </div>
</footer>

<!-- CONFIG: URL Backend Laravel -->
<script src="/js/config.js"></script>
<script src="/js/utils.js"></script>
<script src="/js/data.js"></script>
<script src="/js/main.js"></script>
<script src="/js/ppdb.js"></script>
<script src="/js/ppdb-form.js"></script>

</body>
</html>